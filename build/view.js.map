{"version":3,"file":"view.js","mappings":"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","sources":["webpack://magic-decks-and-cards/./src/view.js","webpack://magic-decks-and-cards/webpack/before-startup","webpack://magic-decks-and-cards/webpack/startup","webpack://magic-decks-and-cards/webpack/after-startup"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n\tlet tooltipInstances = [];\n\n\tconst initializeTooltips = () => {\n\t\t// Destroy existing tooltip instances\n\t\ttooltipInstances.forEach(instance => instance.destroy());\n\t\ttooltipInstances = [];\n\n\t\t// Tippy.js tooltips initialization for touchscreens and small screens\n\t\tconst isTouchScreen = 'ontouchstart' in window || navigator.maxTouchPoints > 0;\n\t\tconst isSmallScreen = window.innerWidth < 768;\n\n\t\tif (isTouchScreen || isSmallScreen) {\n\t\t\tconst cardNameElements = document.querySelectorAll('.mtg-tools-card-name');\n\n\t\t\tcardNameElements.forEach(cardNameElement => {\n\t\t\t\tconst cardElement = cardNameElement.closest('.mtg-tools-card');\n\t\t\t\tconst cardFrontImage = cardElement.getAttribute('data-card-front-image-uri');\n\t\t\t\tconst cardBackImage = cardElement.getAttribute('data-card-back-image-uri');\n\t\t\t\tconst cardName = cardElement.getAttribute('data-card-name') || 'Magic: The Gathering Card';\n\t\t\t\tconst isFoil = cardElement.getAttribute('data-card-foil') === 'Yes';\n\t\t\t\tlet showingBack = false;\n\n\t\t\t\tconst tooltipContent = document.createElement('div');\n\t\t\t\ttooltipContent.innerHTML = `\n\t\t\t\t\t<div class=\"tooltip-card-wrapper\">\n\t\t\t\t\t\t<div class=\"tooltip-image-wrapper\">\n\t\t\t\t\t\t\t<img src=\"${cardFrontImage}\" alt=\"${cardName}\" class=\"tooltip-card-image\">\n\t\t\t\t\t\t\t${isFoil ? '<div class=\"tooltip-gradient-overlay\"></div>' : ''}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${cardBackImage ? `<button class=\"tooltip-flip-button wp-element-button\">Show Back</button>` : ''}\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\n\t\t\t\tif (cardBackImage) {\n\t\t\t\t\tconst flipButton = tooltipContent.querySelector('.tooltip-flip-button');\n\t\t\t\t\tflipButton.addEventListener('click', () => {\n\t\t\t\t\t\tconst imgElement = tooltipContent.querySelector('.tooltip-card-image');\n\t\t\t\t\t\tshowingBack = !showingBack;\n\t\t\t\t\t\timgElement.src = showingBack ? cardBackImage : cardFrontImage;\n\t\t\t\t\t\tflipButton.textContent = showingBack ? 'Show Front' : 'Show Back';\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tconst instance = tippy(cardNameElement, {\n\t\t\t\t\tcontent: tooltipContent,\n\t\t\t\t\tallowHTML: true,\n\t\t\t\t\tinteractive: true,\n\t\t\t\t\tplacement: 'bottom',\n\t\t\t\t\tfollowCursor: 'horizontal'\n\t\t\t\t});\n\t\t\t\ttooltipInstances.push(instance);\n\t\t\t});\n\t\t}\n\t};\n\n\tconst setupDeckContainer = (deckContainer) => {\n\t\tconst defaultImageElement = deckContainer.querySelector('.mtg-tools-image-column .mtg-tools-image');\n\t\tlet showingBack = false;\n\t\tlet lastHoveredCard = null;\n\n\t\tconst removeGradientOverlay = (element) => {\n\t\t\tconst existingOverlay = element.parentNode.querySelector('.mtg-tools-gradient-overlay');\n\t\t\tif (existingOverlay) {\n\t\t\t\texistingOverlay.remove();\n\t\t\t}\n\t\t};\n\n\t\tconst addGradientOverlay = (element) => {\n\t\t\tremoveGradientOverlay(element);\n\t\t\tconst overlay = document.createElement('div');\n\t\t\toverlay.className = 'mtg-tools-gradient-overlay';\n\t\t\telement.parentNode.style.position = 'relative';\n\t\t\telement.parentNode.appendChild(overlay);\n\t\t};\n\n\t\tconst toggleMainImage = (card) => {\n\t\t\tif (defaultImageElement) {\n\t\t\t\tdefaultImageElement.src = showingBack ? card.backImage : card.frontImage;\n\t\t\t}\n\t\t};\n\n\t\tdeckContainer.querySelectorAll('.mtg-tools-card').forEach((cardElement) => {\n\t\t\tconst card = {\n\t\t\t\tfrontImage: cardElement.getAttribute('data-card-front-image-uri'),\n\t\t\t\tbackImage: cardElement.getAttribute('data-card-back-image-uri'),\n\t\t\t\tname: cardElement.getAttribute('data-card-name') || 'Magic: The Gathering Card',\n\t\t\t\tscryfallURI: cardElement.querySelector('.mtg-tools-card-name').getAttribute('href'),\n\t\t\t\tfoil: cardElement.getAttribute('data-card-foil') === 'Yes'\n\t\t\t};\n\n\t\t\tconst flipButton = cardElement.querySelector('.mtg-tools-flip-button button');\n\t\t\tif (flipButton) {\n\t\t\t\tflipButton.addEventListener('click', (event) => {\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\tshowingBack = !showingBack;\n\t\t\t\t\ttoggleMainImage(card);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tcardElement.addEventListener('mouseenter', () => {\n\t\t\t\tlastHoveredCard = card;\n\t\t\t\tshowingBack = false;\n\t\t\t\tdefaultImageElement.src = card.frontImage;\n\t\t\t\tif (card.foil) {\n\t\t\t\t\taddGradientOverlay(defaultImageElement);\n\t\t\t\t} else {\n\t\t\t\t\tremoveGradientOverlay(defaultImageElement);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tif (defaultImageElement.dataset.foil === 'Yes') {\n\t\t\taddGradientOverlay(defaultImageElement);\n\t\t} else {\n\t\t\tremoveGradientOverlay(defaultImageElement);\n\t\t}\n\n\t\tdocument.addEventListener('mouseleave', () => {\n\t\t\tif (lastHoveredCard) {\n\t\t\t\tdefaultImageElement.src = showingBack ? lastHoveredCard.backImage : lastHoveredCard.frontImage;\n\t\t\t}\n\t\t});\n\t};\n\n\tdocument.querySelectorAll('.mtg-tools-container').forEach((deckContainer) => {\n\t\tsetupDeckContainer(deckContainer);\n\t});\n\n\tinitializeTooltips();\n\n\tconst debounce = (func, wait) => {\n\t\tlet timeout;\n\t\treturn (...args) => {\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = setTimeout(() => {\n\t\t\t\tfunc.apply(this, args);\n\t\t\t}, wait);\n\t\t};\n\t};\n\n\tconst handleResize = debounce(() => {\n\t\tconst isSmallScreen = window.innerWidth < 768;\n\t\tconst tooltipsActive = tooltipInstances.length > 0;\n\t\tif ((isSmallScreen && !tooltipsActive) || (!isSmallScreen && tooltipsActive)) {\n\t\t\tinitializeTooltips();\n\t\t}\n\t}, 300); // Debounce interval\n\n\tconst resizeObserver = new ResizeObserver(handleResize);\n\tresizeObserver.observe(document.body);\n\n\t// Fallback for ResizeObserver edge cases\n\twindow.addEventListener('resize', handleResize);\n});\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = {};\n__webpack_modules__[\"./src/view.js\"]();\n",""],"names":["document","addEventListener","tooltipInstances","initializeTooltips","forEach","instance","destroy","isTouchScreen","window","navigator","maxTouchPoints","isSmallScreen","innerWidth","cardNameElements","querySelectorAll","cardNameElement","cardElement","closest","cardFrontImage","getAttribute","cardBackImage","cardName","isFoil","showingBack","tooltipContent","createElement","innerHTML","flipButton","querySelector","imgElement","src","textContent","tippy","content","allowHTML","interactive","placement","followCursor","push","setupDeckContainer","deckContainer","defaultImageElement","lastHoveredCard","removeGradientOverlay","element","existingOverlay","parentNode","remove","addGradientOverlay","overlay","className","style","position","appendChild","toggleMainImage","card","backImage","frontImage","name","scryfallURI","foil","event","stopPropagation","dataset","debounce","func","wait","timeout","args","clearTimeout","setTimeout","apply","handleResize","tooltipsActive","length","resizeObserver","ResizeObserver","observe","body"],"sourceRoot":""}