document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".mtg-tools-container").forEach((t=>{const e=t.querySelector(".mtg-tools-image-column .mtg-tools-image");let o=!1,a=null;const n=t=>{const e=t.parentNode.querySelector(".mtg-tools-gradient-overlay");e&&e.remove()},r=t=>{n(t);const e=document.createElement("div");e.className="mtg-tools-gradient-overlay",t.parentNode.style.position="relative",t.parentNode.appendChild(e)},i=()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0||window.innerWidth<=768;t.querySelectorAll(".mtg-tools-card").forEach((t=>{const l={frontImage:t.getAttribute("data-card-front-image-uri"),backImage:t.getAttribute("data-card-back-image-uri"),name:t.getAttribute("data-card-name")||"Magic: The Gathering Card",scryfallURI:t.querySelector(".mtg-tools-card-name").getAttribute("href"),foil:"Yes"===t.getAttribute("data-card-foil")},c=t.querySelector(".mtg-tools-flip-button button");c&&c.addEventListener("click",(t=>{t.stopPropagation(),o=!o,(t=>{e&&(e.src=o?t.backImage:t.frontImage)})(l)})),t.addEventListener("mouseenter",(()=>{i()||(a=l,o=!1,e.src=l.frontImage,l.foil?r(e):n(e))})),t.addEventListener("click",(t=>{i()?(t.preventDefault(),o=!1,(t=>{let e="";t.backImage&&(e=`\n\t\t\t\t\t<button id="flip-card-button" class="wp-block-button__link wp-element-button mtg-tools-popup-flip-button">\n\t\t\t\t\t\t${o?"Show Front":"Show Back"}\n\t\t\t\t\t</button>\n\t\t\t\t`),Swal.fire({html:`\n\t\t\t\t\t<div class="mtg-tools-popup-content">\n\t\t\t\t\t\t<div class="mtg-tools-popup-image-wrapper">\n\t\t\t\t\t\t\t<img src="${o?t.backImage:t.frontImage}"\n\t\t\t\t\t\t\t\t class="mtg-tools-popup-image"\n\t\t\t\t\t\t\t\t alt="${t.name}">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${e}\n\t\t\t\t\t</div>\n\t\t\t\t`,showCloseButton:!0,showConfirmButton:!1,background:"#fff",width:"auto",didRender:()=>{t.backImage&&document.getElementById("flip-card-button").addEventListener("click",(()=>{o=!o,(t=>{const e=document.querySelector(".mtg-tools-popup-image");e&&(e.src=o?t.backImage:t.frontImage,t.foil?r(e):n(e))})(t)}));const e=document.querySelector(".mtg-tools-popup-image");t.foil&&r(e)},showClass:{popup:"animate__animated animate__fadeIn"},hideClass:{popup:"animate__animated animate__fadeOut"}})})(l)):(a=l,o=!1,e.src=l.frontImage,l.foil?r(e):n(e))}))})),"Yes"===e.dataset.foil?r(e):n(e),document.addEventListener("mouseleave",(()=>{a&&(e.src=o?a.backImage:a.frontImage)}))}))}));