document.addEventListener("DOMContentLoaded",(()=>{const t=document.getElementById("mtg-tools-default-image");let e=!1,a=null;const n=()=>{const e=t.nextElementSibling;e&&e.classList.contains("mtg-tools-gradient-overlay")&&e.remove()},o=t=>{n();const e=document.createElement("div");e.className="mtg-tools-gradient-overlay",t.parentNode.appendChild(e)},r=()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0||window.innerWidth<=768,i=t=>{let a="";t.backImage&&(a=`\n\t\t\t\t<button id="flip-card-button" class="swal2-confirm swal2-styled" style="display: inline-block; margin-top: 10px;">\n\t\t\t\t\t${e?"Show Front":"Show Back"}\n\t\t\t\t</button>\n\t\t\t`),Swal.fire({html:`\n\t\t\t\t<img src="${e?t.backImage:t.frontImage}"\n\t\t\t\t\t class="mtg-tools-popup-image"\n\t\t\t\t\t style="width: 100%; height: auto;"\n\t\t\t\t\t alt="${t.name}">\n\t\t\t\t<p><a href="${t.scryfallURI}" target="_blank">View ${t.name} on Scryfall</a></p>\n\t\t\t\t${a}\n\t\t\t`,showCloseButton:!0,showConfirmButton:!1,background:"#fff",width:"auto",customClass:{popup:"wordpress-default-popup"},didRender:()=>{t.backImage&&document.getElementById("flip-card-button").addEventListener("click",(()=>{e=!e,i(t)})),t.foil&&o(document.querySelector(".swal2-image"))},showClass:{popup:"animate__animated animate__fadeIn"},hideClass:{popup:"animate__animated animate__fadeOut"}})};document.querySelectorAll(".mtg-tools-card").forEach((l=>{const s={frontImage:l.getAttribute("data-card-front-image-uri"),backImage:l.getAttribute("data-card-back-image-uri"),name:l.getAttribute("data-card-name")||"Magic: The Gathering Card",scryfallURI:l.querySelector(".mtg-tools-card-name").getAttribute("href"),foil:"Yes"===l.getAttribute("data-card-foil")},d=l.querySelector(".mtg-tools-flip-button button");d&&d.addEventListener("click",(a=>{a.stopPropagation(),e=!e,(a=>{t&&(t.src=e?a.backImage:a.frontImage)})(s)})),l.addEventListener("mouseenter",(()=>{r()||(a=s,e=!1,t.src=s.frontImage,s.foil?o(t):n())})),l.addEventListener("click",(l=>{r()?(l.preventDefault(),e=!1,i(s)):(a=s,e=!1,t.src=s.frontImage,s.foil?o(t):n())}))})),"Yes"===t.dataset.foil?o(t):n(),document.addEventListener("mouseleave",(()=>{a&&(t.src=e?a.backImage:a.frontImage)}))}));